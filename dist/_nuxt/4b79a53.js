(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{383:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/klakson.mp3"},384:function(e,t,n){var content=n(408);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(73).default)("20fc6580",content,!0,{sourceMap:!1})},388:function(e,t,n){"use strict";n.r(t);n(76);var o=n(74),r=n(75),c=n(34),h=(n(249),n(250)),l=n(255),d=n(251),f=n(252),m=(n(16),n(17),n(46),n(61),n(100),function(){function e(){Object(o.a)(this,e),this.callbacks={},this.callbacks.base={}}return Object(r.a)(e,[{key:"on",value:function(e,t){var n=this;return void 0===e||""===e?(console.warn("wrong names"),!1):void 0===t?(console.warn("wrong callback"),!1):(this.resolveNames(e).forEach((function(e){var o=n.resolveName(e);n.callbacks[o.namespace]instanceof Object||(n.callbacks[o.namespace]={}),n.callbacks[o.namespace][o.value]instanceof Array||(n.callbacks[o.namespace][o.value]=[]),n.callbacks[o.namespace][o.value].push(t)})),this)}},{key:"off",value:function(e){var t=this;return void 0===e||""===e?(console.warn("wrong name"),!1):(this.resolveNames(e).forEach((function(e){var n=t.resolveName(e);if("base"!==n.namespace&&""===n.value)delete t.callbacks[n.namespace];else if("base"===n.namespace)for(var o in t.callbacks)t.callbacks[o]instanceof Object&&t.callbacks[o][n.value]instanceof Array&&(delete t.callbacks[o][n.value],0===Object.keys(t.callbacks[o]).length&&delete t.callbacks[o]);else t.callbacks[n.namespace]instanceof Object&&t.callbacks[n.namespace][n.value]instanceof Array&&(delete t.callbacks[n.namespace][n.value],0===Object.keys(t.callbacks[n.namespace]).length&&delete t.callbacks[n.namespace])})),this)}},{key:"trigger",value:function(e,t){if(void 0===e||""===e)return console.warn("wrong name"),!1;var n=null,o=null,r=t instanceof Array?t:[],c=this.resolveNames(e);if("base"===(c=this.resolveName(c[0])).namespace)for(var h in this.callbacks)this.callbacks[h]instanceof Object&&this.callbacks[h][c.value]instanceof Array&&this.callbacks[h][c.value].forEach((function(e){o=e.apply(this,r),void 0===n&&(n=o)}));else if(this.callbacks[c.namespace]instanceof Object){if(""===c.value)return console.warn("wrong name"),this;this.callbacks[c.namespace][c.value].forEach((function(e){o=e.apply(this,r),void 0===n&&(n=o)}))}return n}},{key:"resolveNames",value:function(e){var t=e;return t=(t=(t=t.replace(/[^a-zA-Z0-9 ,/.]/g,"")).replace(/[,/]+/g," ")).split(" ")}},{key:"resolveName",value:function(e){var t={},n=e.split(".");return t.original=e,t.value=n[0],t.namespace="base",n.length>1&&""!==n[1]&&(t.namespace=n[1]),t}}]),e}());function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(d.a)(this,n)}}var y=function(e){Object(l.a)(n,e);var t=v(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).width=window.innerWidth,e.height=window.innerHeight,e.pixelRatio=Math.min(window.devicePixelRatio,2),e.containerTarget=document.querySelector(".banner"),e.timerResize=null,e.listenerHandler=e._onResize.bind(Object(h.a)(e)),window.addEventListener("resize",e.listenerHandler),e}return Object(r.a)(n,[{key:"visibleHeightAtZDepth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.position.z;t<n?t-=n:t+=n;var o=e.fov*Math.PI/180;return 2*Math.tan(o/2)*Math.abs(t)}},{key:"visibleWidthAtZDepth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.visibleHeightAtZDepth(e,t);return n*e.aspect}},{key:"_onResize",value:function(){var e=this;this.width=this.containerTarget.clientWidth,this.height=this.containerTarget.clientHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2),clearTimeout(this.timerResize),this.timerResize=setTimeout((function(){e.trigger("resize")}),200)}},{key:"stop",value:function(){window.removeEventListener("resize",this.listenerHandler)}}]),n}(m);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(d.a)(this,n)}}var k=function(e){Object(l.a)(n,e);var t=w(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).prevX=0,e.prevY=0,e.x=0,e.y=0,e.xP=0,e.yP=0,e.xP2=0,e.yP2=0,window.addEventListener("mousemove",e._onMouseMove.bind(Object(h.a)(e))),e}return Object(r.a)(n,[{key:"_onMouseMove",value:function(e){this.x=e.clientX,this.y=e.clientY,this.xP=this.x/window.innerWidth,this.yP=this.y/window.innerHeight,this.xP2=2*this.xP-1,this.yP2=-2*this.yP+1,this.trigger("mousemoved")}}]),n}(m),z=n(25);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(d.a)(this,n)}}var _=function(e){Object(l.a)(n,e);var t=x(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).elapsed=0,e.delta=16,e.tickerFunction=e._tick.bind(Object(h.a)(e)),z.a.ticker.add(e.tickerFunction),e}return Object(r.a)(n,[{key:"_tick",value:function(time,e,t){this.delta=e,this.elapsed=time}},{key:"stop",value:function(){z.a.ticker.remove(this.tickerFunction)}}]),n}(m),O=n(404),j=function(){function e(){Object(o.a)(this,e),this.app=new Z,this.sizes=this.app.sizes,this.scene=this.app.scene,this.canvas=this.app.canvas,this._setInstance()}return Object(r.a)(e,[{key:"_setInstance",value:function(){this.instance=new c.V(40,this.sizes.width/this.sizes.height,.1,100),this.instance.position.set(0,0,4),this.scene.add(this.instance)}},{key:"_setOrbitControls",value:function(){this.controls=new O.a(this.instance,this.canvas),this.controls.enableDamping=!0}},{key:"resize",value:function(){this.instance.aspect=this.sizes.width/this.sizes.height,this.instance.updateProjectionMatrix()}},{key:"update",value:function(){}}]),e}(),M=function(){function e(){Object(o.a)(this,e),this.app=new Z,this.canvas=this.app.canvas,this.sizes=this.app.sizes,this.scene=this.app.scene,this.camera=this.app.camera,this.updateFn=this.update.bind(this),z.a.ticker.add(this.updateFn),this._setInstance()}return Object(r.a)(e,[{key:"_setInstance",value:function(){this.instance=new c.wb({canvas:this.canvas,antialias:!0}),this.instance.outputEncoding=c.xb,this.instance.setClearColor("#0d000d"),this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)}},{key:"resize",value:function(){this.instance.setSize(this.sizes.width,this.sizes.height),this.instance.setPixelRatio(this.sizes.pixelRatio)}},{key:"update",value:function(){this.instance.render(this.scene,this.camera.instance)}},{key:"dispose",value:function(){z.a.ticker.remove(this.updateFn),this.instance.renderLists.dispose(),this.instance.dispose(),this.instance=null}}]),e}(),P=function(){function e(){Object(o.a)(this,e),this.app=new Z,this.scene=this.app.scene,this.resources=this.app.resources,this._setSunLight()}return Object(r.a)(e,[{key:"_setSunLight",value:function(){this.sunlight=new c.k("#ffffff",4),this.sunlight.castShadow=!0,this.sunlight.shadow.camera.far=4,this.sunlight.shadow.mapSize.set(1024,1024),this.sunlight.shadow.normalBias=.05,this.sunlight.position.set(0,2,5),this.scene.add(this.sunlight)}},{key:"destroy",value:function(){this.scene.remove(this.sunlight),this.sunlight.dispose(),this.sunlight=null}}]),e}(),R=function(){function e(){Object(o.a)(this,e),this.app=new Z,this.scene=this.app.scene,this.time=this.app.time,this.camera=this.app.camera,this.sizes=this.app.sizes,this.mouse=this.app.mouse,this.mouseSmooth={x:this.app.mouse.xP,y:this.app.mouse.yP},this.debounceTimer=null,this.grid=new c.tb(15,15),this.mouse.on("mousemoved",this._mousemoved.bind(this)),this._setGeometry(),this._setMaterial(),this._setMesh(),this._updateParams()}return Object(r.a)(e,[{key:"_setGeometry",value:function(){this.geometry=new c.W(1,2,this.grid.x,this.grid.y)}},{key:"_setMaterial",value:function(){this.material=new c.db({side:c.l,transparent:!0,opacity:0,vertexShader:"uniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\nuniform vec2 mousePositions;\n\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec2 vUv;\nvarying float elevation;\n\nvoid main()\n{\n  vec3 pos = position;\n\n  float xMouse = mousePositions.x;\n  float yMouse = 1.0 - mousePositions.y;\n  float baseStep = 0.1;\n\n  pos.z += smoothstep(xMouse - baseStep, xMouse, uv.x) - smoothstep(xMouse, xMouse + baseStep, uv.x);\n  pos.z *= smoothstep(yMouse - baseStep, yMouse, uv.y) - smoothstep(yMouse, yMouse  + baseStep, uv.y);\n  pos.z *= 0.14;\n\n  vec4 projectedPosition = projectionMatrix * viewMatrix * modelMatrix * vec4(pos, 1.0);\n\n  gl_Position = projectedPosition;\n\n  vUv = uv;\n  elevation = pos.z;\n}\n",fragmentShader:"precision mediump float;\nuniform vec2 grid;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alpha;\nuniform bool fog;\n\nvarying vec2 vUv;\nvarying float elevation;\n\nvoid main()\n{\n  vec3 lineColor = vec3(0.7, 0.3, 1.0);\n  vec3 tileColor = vec3(0.08, 0.03, 0.0);\n\n  float modX = mod(vUv.x * grid.x, 1.0) ;\n  float modY = mod(vUv.y * grid.y, 1.0);\n\n  float strength = smoothstep(0.0, 0.02, modX) - smoothstep(0.98, 1.0, modX);\n  strength *= smoothstep(0.0, 0.02, modY) - smoothstep(0.98, 1.0, modY);\n  gl_FragColor = vec4(mix(lineColor, tileColor, strength), float(alpha));\n\n  if(fog) {\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fogNear, fogFar, depth);\n    gl_FragColor.xyz = mix(gl_FragColor.xyz, fogColor, fogFactor);\n  }\n\n}\n",uniforms:{aspect:{value:1},mousePositions:{value:new c.tb(0,0)},grid:{value:this.grid},fogColor:{value:new c.ub(.05,0,.05)},fogNear:{value:2.5},fogFar:{value:3.5},fog:{value:!0},alpha:{value:1}}})}},{key:"_setMesh",value:function(){this.mesh=new c.K(this.geometry,this.material),this.mesh.rotateX(-Math.PI/180*75),this.scene.add(this.mesh)}},{key:"_updateParams",value:function(){this.mesh.scale.x=this.sizes.visibleWidthAtZDepth(this.camera.instance),this.mesh.scale.y=this.sizes.visibleHeightAtZDepth(this.camera.instance);var e=(new c.d).setFromObject(this.mesh);this.meshSizes={x:e.max.x-e.min.x,y:e.max.y-e.min.y},this.mesh.position.z=this.meshSizes.y/2*Math.tan(Math.abs(this.mesh.rotation.x)),this.mesh.position.y=-this.meshSizes.y/2-this.sizes.visibleHeightAtZDepth(this.camera.instance)/2+this.meshSizes.y}},{key:"_mousemoved",value:function(){var e=this;clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(){z.a.to(e.mouseSmooth,{x:e.mouse.xP,y:e.mouse.yP,duration:1.5,overwrite:!0,ease:"power4.out",onUpdate:function(){e.material.uniforms.mousePositions.value=new c.tb(e.mouseSmooth.x,e.mouseSmooth.y/e.meshSizes.y-.25)}})}),4)}},{key:"resize",value:function(){this._updateParams()}},{key:"update",value:function(){}},{key:"destroy",value:function(){this.scene.remove(this.grid),this.geometry.dispose(),this.material.dispose(),this.mesh.geometry.dispose(),this.mesh.material.dispose(),this.mesh=null}}]),e}();function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(d.a)(this,n)}}var A=function(e){Object(l.a)(n,e);var t=L(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).app=new Z,e.scene=e.app.scene,e.renderer=e.app.renderer,e.resources=e.app.resources,e.mouse=e.app.mouse,e.ticker=e.app.time,e.sizes=e.app.sizes,e.debug=e.app.debug,e.camera=e.app.camera,e.animationCounter=0,e.raycaster=new c.eb,e.resource=e.resources.items.vwModel,e._setModel(),e._setAnimation(),e._update=e.update.bind(Object(h.a)(e)),z.a.ticker.add(e._update),window.addEventListener("click",(function(){e.currentIntersect&&e.trigger("vwClicked")})),e}return Object(r.a)(n,[{key:"_setModel",value:function(){var e=this;this.model=this.resource.scene,this.model.rotation.y=-Math.PI/180*60,this.model.rotation.x=Math.PI/180*15,this.model.position.z=2.5,this.modelMeshes=[],this.model.traverse((function(t){t instanceof c.K&&(t.castShadow=!0,e.modelMeshes.push(t))})),this._updateModelParams(),this.scene.add(this.model),z.a.from(this.model.position,{x:this.sizes.visibleWidthAtZDepth(this.camera.instance,this.model.position.z)/2,onComplete:function(){return e.trigger("vwonthescreen")}})}},{key:"_updateModelParams",value:function(){this.model.position.z=2.5;var e=this.sizes.visibleWidthAtZDepth(this.camera.instance,2.5),t=this.sizes.visibleHeightAtZDepth(this.camera.instance,2.5);this.sizes.width>1200?(this.model.scale.set(.11,.11,.11),this.model.position.y=.16*-t,this.model.position.x=.25*e):this.sizes.width>1023&&this.sizes.width<=1200?(this.model.scale.set(.085,.085,.085),this.model.position.y=.32*-t,this.model.position.x=.25*e):this.sizes.width>767&&this.sizes.width<=1023?(this.model.scale.set(.075,.075,.075),this.model.position.y=.35*-t,this.model.position.x=0):this.sizes.width>480&&this.sizes.width<=767?(this.model.scale.set(.09,.09,.09),this.model.position.y=.35*-t,this.model.position.x=0):(this.model.scale.set(.065,.065,.065),this.model.position.y=.3*-t,this.model.position.x=0)}},{key:"_setAnimation",value:function(){var e=this;this.animation={},this.animation.mixer=new c.b(this.model),this.animation.actions=[],this.resource.animations.forEach((function(t,i){e.animation.actions.push(e.animation.mixer.clipAction(t).setLoop(c.F,1)),e.animation.actions[i].clampWhenFinished=!0})),this.animation.mixer.addEventListener("finished",(function(){return++e.animationCounter})),this._playAnimation()}},{key:"_playAnimation",value:function(){this.animationCounter=0,this.animation.actions.forEach((function(e){e.reset().play()}))}},{key:"_setDebug",value:function(){this.debugFolder=this.debug.ui.addFolder("VW");var e={playAnimation:this._playAnimation.bind(this)};this.debugFolder.add(e,"playAnimation")}},{key:"resize",value:function(){this._updateModelParams()}},{key:"update",value:function(){this.animation.mixer.update(.0015*this.ticker.delta),this.mouse.xP2!==this.lastX&&this.mouse.yP2!==this.lastY&&this.animationCounter===this.animation.actions.length&&(this.raycaster.setFromCamera(new c.tb(this.mouse.xP2,this.mouse.yP2),this.camera.instance),this.currentIntersect=this.raycaster.intersectObjects(this.modelMeshes,!1)[0]||null,this.currentIntersect&&!this.prevIntersect&&this._playAnimation(),this.prevIntersect=this.currentIntersect),this.lastX=this.mouse.xP2,this.lastY=this.mouse.yP2}},{key:"destroy",value:function(){z.a.ticker.remove(this._update),this.scene.remove(this.model),this.model.traverse((function(e){e instanceof c.T&&(e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose())})),this.model=null}}]),n}(m);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(d.a)(this,n)}}var S=function(e){Object(l.a)(n,e);var t=C(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).app=new Z,e.scene=e.app.scene,e.renderer=e.app.renderer,e.resources=e.app.resources,e.geek=e.resources.items.geekModel,e.sizes=e.app.sizes,e.camera=e.app.camera,e._setModel(),e._update=e.update.bind(Object(h.a)(e)),e}return Object(r.a)(n,[{key:"_setModel",value:function(){var e=this;this.model=this.geek.scene,this.modelMeshes=[],this.model.traverse((function(t){t instanceof c.K&&(t.castShadow=!0,e.modelMeshes.push(t))})),this._updateModelParams(),this._setAnimation(),this.scene.add(this.model)}},{key:"_updateModelParams",value:function(){this.model.position.z=2.5;var e=this.sizes.visibleWidthAtZDepth(this.camera.instance,2.5),t=this.sizes.visibleHeightAtZDepth(this.camera.instance,2.5);this.sizes.width>1200?(this.model.scale.set(.15,.15,.15),this.model.position.y=0,this.model.position.x=.25*e):this.sizes.width>1023&&this.sizes.width<=1200?(this.model.scale.set(.1,.1,.1),this.model.position.y=0,this.model.position.x=.25*e):this.sizes.width>991&&this.sizes.width<=1023?(this.model.scale.set(.1,.1,.1),this.model.position.y=.25*-t,this.model.position.x=0):this.sizes.width>480&&this.sizes.width<=991?(this.model.scale.set(.14,.14,.14),this.model.position.y=.2*-t,this.model.position.x=0):(this.model.scale.set(.1,.1,.1),this.model.position.y=.2*-t,this.model.position.x=0)}},{key:"_setAnimation",value:function(){var e=this;this.tls={};var t=this.tls.tl1=z.a.timeline({repeat:-1});t.set(this.model.rotation,{y:.03*-Math.PI}),t.to(this.model.rotation,{x:2*-Math.PI,ease:"power4.inOut",duration:3}),t.to(this.model.rotation,{y:2*Math.PI,ease:"power4.inOut",duration:3},"-=2.25"),t.to(this.model.rotation,{z:2*-Math.PI,ease:"power4.inOut",duration:3},"-=2.25"),t.eventCallback("onRepeat",(function(){e.resources.items.vwModel&&z.a.to(e.model.position,{duration:2,ease:"back.inOut(1.7)",x:e.sizes.visibleWidthAtZDepth(e.camera.instance,2.5),onComplete:function(){e.trigger("removed"),t.pause().seek(1).kill(),e.destroy()}})}))}},{key:"resize",value:function(){this._updateModelParams()}},{key:"update",value:function(){}},{key:"destroy",value:function(){for(var e in this.scene.remove(this.model),this.tls)this.tls[e].kill();this.model.traverse((function(e){e instanceof c.T&&(e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose())})),this.model=null,this.geek=null}}]),n}(m),D=n(130),T=[{name:"geekModel",type:"gltfModel",path:"SanDiego/models/vw/geek.glb"}],F=[{name:"vwModel",type:"gltfModel",path:"SanDiego/models/vw/vw.glb"}];z.a.registerPlugin(D.a);var E=function(){function e(){Object(o.a)(this,e),this.app=new Z,this.scene=this.app.scene,this.renderer=this.app.renderer,this.sizes=this.app.sizes,this.camera=this.app.camera,this.resources=this.app.resources,this._isItNeed()&&this._setObjects(),this.grid=new R}return Object(r.a)(e,[{key:"_isItNeed",value:function(){return this.sizes.width>576}},{key:"_setObjects",value:function(){this.firstLoads=this._firstLoads.bind(this),this.resources.on("ready1",this.firstLoads),this.resources._startLoading(T),this.secondLoads=this._secondLoads.bind(this)}},{key:"_firstLoads",value:function(){this.environment=this.environment||new P,this.geek=new S,this.activeTopElement=this.geek.model,this._setScrollTriggers(),this.resources.off("ready1",this.firstLoads),this.resources.on("ready2",this.secondLoads),this.resources._startLoading(F)}},{key:"_secondLoads",value:function(){var e=this;this.resources.off("ready2",this.secondLoads),this._isItNeed()&&this.geek.on("removed",(function(){e._removeScrollTrigger(),e.geek=null,e.vw=new A,e.activeTopElement=e.vw.model,e.vw.on("vwonthescreen",(function(){e._setScrollTriggers(),D.a.refresh(),D.a.update()}))}))}},{key:"_getAspectHeight",value:function(){return this.sizes.visibleHeightAtZDepth(this.camera.instance,this.activeTopElement.position.z+.5)/this.sizes.height}},{key:"_getAspectWidth",value:function(){return this.sizes.visibleWidthAtZDepth(this.camera.instance,this.activeTopElement.position.z+.5)/this.sizes.width}},{key:"_setScrollTriggers",value:function(){var e,t=this,n=z.a.timeline({ease:"none",scrollTrigger:{trigger:"body",start:"".concat(this.renderer.canvas.clientHeight/2," center"),end:"+=".concat(this.renderer.canvas.clientHeight),scrub:1}});n.to(this.activeTopElement.position,{x:function(){return t._getAspectWidth()*t.sizes.width*1.2}}),this.activeTopElement!==(null===(e=this.geek)||void 0===e?void 0:e.model)&&n.to(this.activeTopElement.rotation,{y:"+=".concat(Math.PI/180*90)},"<"),n.to(this.grid.material.uniforms.alpha,{value:0},"<"),n.to(this.grid.material.uniforms.alpha,{value:1,duration:.01})}},{key:"_removeScrollTrigger",value:function(){D.a.getAll().forEach((function(e){e.kill(!0)}))}},{key:"resize",value:function(){this.grid&&this.grid.resize(),this._isItNeed()?this.vw||this.geek?(this.geek&&this.geek.resize(),this.vw&&this.vw.resize(),this._removeScrollTrigger(),this._setScrollTriggers(),D.a.refresh()):(this.resources.loaderCount=0,this._setObjects()):(this.resources.off("ready1",this.firstLoads),this.resources.off("ready2",this.firstLoads),this.vw&&(this.vw.destroy(),this.vw=null),this.geek&&(this.geek.destroy(),this.geek=null))}},{key:"update",value:function(){this.grid&&this.grid.update(),this.vw&&this.vw.update()}},{key:"destroy",value:function(){this.vw&&this.vw.destroy(),this.geek&&this.geek.destroy(),this.grid&&this.grid.destroy(),this.resources.off("ready1",this.firstLoads),this.resources.off("ready2",this.firstLoads),this._removeScrollTrigger(),this.environment&&this.environment.destroy()}}]),e}(),I=(n(42),n(405)),H=n(406);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(d.a)(this,n)}}var W=function(e){Object(l.a)(n,e);var t=N(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).items={},e.toLoad=0,e.loaded=0,e.loaderCount=0,e._setLoaders(),e}return Object(r.a)(n,[{key:"_setLoaders",value:function(){this.loaders={},this.loaders.DRACOLoader=new H.a,this.loaders.DRACOLoader.setDecoderPath("./SanDiego/draco/gltf/"),this.loaders.DRACOLoader.setDecoderConfig({type:"js"}),this.loaders.gltfLoader=(new I.a).setDRACOLoader(this.loaders.DRACOLoader),this.loaders.textureLoader=new c.qb,this.loaders.cubeTextureLoader=new c.j}},{key:"_startLoading",value:function(e){var t=this;this.toLoad=e.length,e.forEach((function(source){switch(source.type){case"gltfModel":t.loaders.gltfLoader.load(source.path,t._sourceLoaded.bind(t,source));break;case"cubeTexture":t.loaders.cubeTextureLoader.load(source.path,t._sourceLoaded.bind(t,source));break;case"texture":t.loaders.textureLoader.load(source.path,t._sourceLoaded.bind(t,source))}}))}},{key:"_sourceLoaded",value:function(source,e){this.items[source.name]=e,++this.loaded,this.loaded===this.toLoad&&(++this.loaderCount,this.loaded=0,this.trigger("ready".concat(this.loaderCount),this.loaderCount))}}]),n}(m);window.instance=null;var Z=function(){function e(canvas){if(Object(o.a)(this,e),window.instance)return window.instance;window.instance=this,this.canvas=canvas,this.sizes=new y,this.mouse=new k,this.scene=new c.hb,this.time=new _,this.resources=new W,this.camera=new j,this.renderer=new M,this.world=new E,this.sizes.on("resize",this._resize.bind(this))}return Object(r.a)(e,[{key:"_resize",value:function(){this.camera.resize(),this.renderer.resize(),this.world.resize()}},{key:"destroy",value:function(){this.time.stop(),this.world.destroy(),this.world=null,this.scene=null,this.camera=null,this.sizes.stop(),this.resources=null,this.mouse=null,this.renderer.dispose(),window.instance=null}}]),e}(),B={name:"Canvas",data:function(){return{beep:null,audioFile:n(383).default}},mounted:function(){this.audioFile=n(383).default,this.beep=new Audio(this.audioFile),this.sanDiego=new Z(this.$refs.canvasEl),setTimeout((function(){window.scrollTo(0,0)}),1)},beforeDestroy:function(){var e;this.sanDiego&&(null!==(e=this.sanDiego.world)&&void 0!==e&&e.vw&&this.sanDiego.world.vw.off("vwClicked",this.sound.bind(this)),this.sanDiego.destroy(),this.sanDiego=null)},methods:{sound:function(){this.sanDiego&&(this.beep.paused||(this.beep.pause(),this.beep.currentTime=0),this.beep.play())}}},X=(n(407),n(29)),component=Object(X.a)(B,(function(){var e=this.$createElement;return(this._self._c||e)("canvas",{ref:"canvasEl",staticClass:"canvas"})}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Canvas:n(388).default})},407:function(e,t,n){"use strict";n(384)},408:function(e,t,n){var o=n(72)(!1);o.push([e.i,".canvas{height:100%;width:100%;position:fixed;top:0;left:0;z-index:-1;display:block}",""]),e.exports=o}}]);